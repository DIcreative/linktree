:root {
      --bg: #0f1220;
      --panel: #171a2b;
      --ink: #e8ebff;
      --muted: #a7b0d9;
      --accent: #7aa2ff;
      --accent-2: #00d4ff;
      --danger: #ff7a7a;
      --ok: #72e0a8;
      --warn: #ffd27a;
      --grid: #2a2f4b;
      --guide: #2dd4bf;
      --selection: rgba(122,162,255,.25);
      --shadow: 0 10px 30px rgba(0,0,0,.35);
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0; background: var(--bg); color: var(--ink); font-family: system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
      overflow: hidden;
    }

    /* Top bar */
    .topbar {
      height: 56px; display: flex; align-items: center; gap: 12px;
      padding: 0 12px; background: var(--panel); border-bottom: 1px solid #232844;
      position: relative; z-index: 3;
    }
    .brand { font-weight: 700; letter-spacing: .4px; }
    .btn, .chip { cursor: pointer; user-select: none; }
    .btn {
      padding: 8px 12px; border-radius: 12px; border: 1px solid #30365a; background: #1b2039; color: var(--ink);
      display: inline-flex; align-items: center; gap: 8px; box-shadow: var(--shadow);
    }
    .btn:hover { filter: brightness(1.1); }
    .btn:active { transform: translateY(1px); }
    .icon { width: 18px; height: 18px; display: inline-grid; place-items: center; }

    /* Hamburger + Side drawer */
    .hamburger { width: 40px; height: 40px; border-radius: 12px; display: grid; place-items: center; background:#1b2039; border:1px solid #30365a;}
    .hamburger div { width: 18px; height: 2px; background: var(--ink); position: relative; }
    .hamburger div::before, .hamburger div::after { content:""; position:absolute; left:0; right:0; height:2px; background:var(--ink);} 
    .hamburger div::before { top:-6px } .hamburger div::after { top:6px }

    .drawer {
      position: absolute; top: 56px; left: 0; bottom: 0; width: 340px; background: var(--panel);
      border-right: 1px solid #232844; transform: translateX(-100%); transition: transform .2s ease; z-index: 4;
      overflow: auto; padding-bottom: 80px;
    }
    .drawer.open { transform: translateX(0); }

    .section { padding: 14px 14px 8px 14px; border-bottom: 1px solid #232844; }
    .section h3 { margin: 6px 0 10px; font-size: 13px; color: var(--muted); text-transform: uppercase; letter-spacing: .12em; }
    .row { display:flex; gap:8px; align-items:center; flex-wrap: wrap; margin: 8px 0; }
    .row label { font-size: 12px; color: var(--muted); }
    .row input, .row select, .row textarea {
      background: #12152a; color: var(--ink); border: 1px solid #30365a; border-radius: 10px; padding: 8px 10px; outline: none; flex: 1 1 auto;
    }
    .row input[type="number"] { width: 90px; }
    .row .small { width: 70px; }
    .chip { font-size: 12px; padding: 6px 8px; border-radius: 999px; background:#12152a; border:1px solid #30365a; }

    /* Canvas area */
    .stage-wrap { position: absolute; inset: 56px 0 0 0; display: grid; grid-template-columns: 1fr; }
    .stage { position: relative; overflow: auto; padding: 24px; }
    .pages-view { display: flex; align-items: flex-start; gap: 24px; }

    .page {
      position: relative; background: white; color: black; box-shadow: var(--shadow); border: 1px solid #c7cdf5;
      transform-origin: top left; /* zoom friendly */
    }
    .page .margin-guide { position: absolute; border: 1px dashed var(--guide); pointer-events: none;}
    .rulers { position: sticky; top:0; left:0; right:0; height: 24px; display:flex; gap:24px; z-index:2; }
    .ruler { position: sticky; left:0; height: 24px; background:#0b0e1c; border-bottom: 1px solid #232844; color: var(--muted); font-size:10px; display:flex; align-items:flex-end; }
    .ruler.vertical { position:absolute; top:24px; bottom:0; width:24px; height:auto; display:block; border-right:1px solid #232844; }
    .tick { position:absolute; width:1px; background:#394068; }
    .tick.label { width:auto; height:auto; background:none; color:#8ea2ff; }

    /* Elements */
    .el { position:absolute; user-select:none; }
    .el .content[contenteditable="true"]:focus { outline: 2px dashed var(--accent); outline-offset: 2px; }
    .selected { outline: 2px solid var(--accent); outline-offset:-2px; }
    .controls { position:absolute; bottom:-34px; left:50%; transform: translateX(-50%); display:flex; gap:6px; background:#0b0e1c; padding:6px; border:1px solid #30365a; border-radius:12px; box-shadow: var(--shadow); }
    .controls .cbtn { width:28px; height:28px; display:grid; place-items:center; background:#151a31; border:1px solid #30365a; border-radius:8px; }
    .handle { position:absolute; width:12px; height:12px; border-radius:50%; border:2px solid #111526; background: var(--accent); display:none; }
    .el.scaling .handle { display:block; }
    .handle.br { right:-6px; bottom:-6px; cursor: nwse-resize; }

    .img-placeholder { background: repeating-conic-gradient(#ddd 0% 25%, #bbb 0% 50%) 50% / 20px 20px; border: 1px solid #888; }

    /* Layers panel */
    .layers { display:flex; flex-direction: column; gap:6px; }
    .layer-item { display:flex; align-items:center; justify-content:space-between; padding:6px 8px; border:1px solid #30365a; border-radius:8px; background:#12152a; }
    .layer-item .name { font-size:12px; color: var(--muted); }

    /* Footer */
    .footer { position:absolute; left:0; right:0; bottom:0; height: 46px; display:flex; align-items:center; justify-content:space-between; background: var(--panel); border-top: 1px solid #232844; padding: 0 12px; gap: 8px; }

    .spacer { flex:1; }
    .thumbs { display:flex; gap: 8px; overflow:auto; }
    .thumb { width:60px; height:80px; background:white; border:1px solid #30365a; box-shadow: var(--shadow); position:relative; display:grid; place-items:center; color:#000; font-size:11px; border-radius:4px; }
    .badge { position:absolute; top:4px; left:4px; font-size:10px; background:#00000080; color:#fff; padding:2px 6px; border-radius:999px; }

    /* Modals */
    dialog { border: 1px solid #30365a; border-radius: 16px; background: #0b0e1c; color: var(--ink); box-shadow: var(--shadow); }
    dialog form { display:grid; gap:10px; }
