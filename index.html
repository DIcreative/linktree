<header class="topbar">
    <div class="hamburger btn" id="hamburger" title="Menu"><div></div></div>
    <div class="brand">Layout Template Builder</div>
    <button class="btn" id="addCover"><span class="icon">üìï</span>Cover</button>
    <button class="btn" id="addBack"><span class="icon">üìò</span>Back</button>
    <div class="spacer"></div>
    <button class="btn" id="exportBtn" title="Export template JSON"><span class="icon">‚¨áÔ∏è</span>Export</button>
    <label class="btn" for="importFile" title="Import template JSON"><span class="icon">‚¨ÜÔ∏è</span>Import</label>
    <input id="importFile" type="file" accept="application/json" hidden />
  </header>

  <aside class="drawer" id="drawer">
    <!-- Units & Size -->
    <div class="section">
      <h3>Units & Page Size</h3>
      <div class="row">
        <label>Units</label>
        <select id="units">
          <option value="in">in</option>
          <option value="cm" selected>cm</option>
          <option value="mm">mm</option>
        </select>
        <span class="chip" id="toggleRulers">Rulers</span>
      </div>
      <div class="row">
        <label>Preset</label>
        <select id="presetSize"></select>
      </div>
      <div class="row">
        <label>W</label><input class="small" id="pageW" type="number" step="0.1" min="0.1" />
        <label>H</label><input class="small" id="pageH" type="number" step="0.1" min="0.1" />
        <button class="btn" id="applySize">Apply</button>
      </div>
      <div class="row">
        <input id="customName" placeholder="Save custom size name" />
        <button class="btn" id="saveCustomSize">Save Size</button>
      </div>
    </div>

    <!-- Margins -->
    <div class="section">
      <h3>Margins</h3>
      <div class="row">
        <label>Top</label><input class="small" id="mTop" type="number" step="0.1" />
        <label>Right</label><input class="small" id="mRight" type="number" step="0.1" />
        <label>Bottom</label><input class="small" id="mBottom" type="number" step="0.1" />
        <label>Left</label><input class="small" id="mLeft" type="number" step="0.1" />
      </div>
      <div class="row">
        <span class="chip" id="applyMargins">Apply Margins</span>
        <span class="chip" id="toggleSnap">Snap to guides</span>
      </div>
    </div>

    <!-- Pages & View -->
    <div class="section">
      <h3>Pages</h3>
      <div class="row">
        <button class="btn" id="addPage">Add Page</button>
        <button class="btn" id="prevPage">Prev</button>
        <button class="btn" id="nextPage">Next</button>
      </div>
      <div class="row">
        <label>Pages shown</label>
        <select id="pagesShown">
          <option>1</option>
          <option selected>2</option>
          <option>3</option>
        </select>
      </div>
    </div>

    <!-- Insert -->
    <div class="section">
      <h3>Insert</h3>
      <div class="row">
        <button class="btn" id="addTitle">+ Title</button>
        <button class="btn" id="addSubtitle">+ Subtitle</button>
        <button class="btn" id="addParagraph">+ Paragraph</button>
      </div>
      <div class="row">
        <button class="btn" id="addImage">+ Image placeholder</button>
        <label class="btn" for="fontFile">Import Font</label>
        <input id="fontFile" type="file" accept=".ttf,.otf,.woff,.woff2" hidden />
      </div>
      <div class="row">
        <select id="shapeType">
          <option value="rect">Rectangle</option>
          <option value="square">Square</option>
          <option value="ellipse">Ellipse</option>
          <option value="circle">Circle</option>
          <option value="polygon">Polygon‚Ä¶</option>
          <option value="star">Star‚Ä¶</option>
        </select>
        <select id="shapeUse">
          <option value="element">Element</option>
          <option value="textbox">Text box</option>
          <option value="image">Image placeholder</option>
        </select>
        <button class="btn" id="addShape">+ Shape</button>
      </div>
      <div class="row" id="polyInputs" style="display:none">
        <label>Sides</label><input id="polySides" type="number" min="3" value="5" class="small" />
      </div>
      <div class="row" id="starInputs" style="display:none">
        <label>Peaks</label><input id="starPeaks" type="number" min="3" value="5" class="small" />
        <label>Inner %</label><input id="starInner" type="number" min="5" max="95" value="50" class="small" />
      </div>
    </div>

    <!-- Element Properties -->
    <div class="section">
      <h3>Element Properties</h3>
      <div class="row">
        <label>Font</label><select id="fontSelect"><option value="system-ui">System</option></select>
      </div>
      <div class="row">
        <label>Fill</label><input id="fillColor1" type="color" value="#ffffff" />
        <label>‚Üí</label><input id="fillColor2" type="color" value="#ffffff" />
        <label>Angle</label><input id="gradAngle" type="number" class="small" value="0" />
      </div>
      <div class="row">
        <label>Stroke</label><input id="strokeColor" type="color" value="#000000" />
        <label>W</label><input id="strokeW" type="number" class="small" value="0" />
      </div>
      <div class="row">
        <button class="btn" id="applyStyle">Apply Style</button>
        <button class="btn" id="layerUp">Layer ‚Üë</button>
        <button class="btn" id="layerDown">Layer ‚Üì</button>
      </div>
    </div>

    <!-- Layers -->
    <div class="section">
      <h3>Layers (current page)</h3>
      <div id="layers" class="layers"></div>
    </div>
  </aside>

  <main class="stage-wrap">
    <div class="stage">
      <div class="rulers" id="rulersX"></div>
      <div class="pages-view" id="pagesView"></div>
    </div>
  </main>

  <footer class="footer">
    <div class="thumbs" id="thumbs"></div>
    <div class="spacer"></div>
    <div id="status" style="font-size:12px;color:var(--muted)">Ready.</div>
  </footer>

  <!-- Simple modal for text editing -->
  <dialog id="textEditDlg">
    <form method="dialog">
      <h3>Edit Text</h3>
      <textarea id="textEditArea" rows="6"></textarea>
      <menu style="display:flex; gap:8px; justify-content:flex-end;">
        <button value="cancel">Cancel</button>
        <button id="textEditOk" value="ok">OK</button>
      </menu>
    </form>
  </dialog>
